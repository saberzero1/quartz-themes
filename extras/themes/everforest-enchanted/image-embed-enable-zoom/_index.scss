body.image-embed-enable-zoom {
  & .image-embed {
    & img {
      cursor: zoom-out;
    }

    &:active {
      --zoom-embed-size: min(90%, calc(var(--readable-line-length-custom, 700px) + 120px));
      display: flex !important;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: fixed;
      max-width: 100%;
      width: 100% !important;
      margin: auto 0 !important;
      inset: 0;
      object-fit: contain;
      z-index: 1;
    }
    &:active img {
      width: var(--zoom-embed-size) !important;
      max-height: 80%;
      margin: 0 !important;
      user-select: none;
      object-fit: contain;
    }
    &:active::after {
      margin-inline: 0 !important;
      padding: 1ch;
      font-size: large;
      box-sizing: border-box;
      width: var(--zoom-embed-size) !important;
      background-color: var(--background-primary);
    }
    &:active::before {
      content: "";
      position: absolute;
      background-color: var(--color-base-00);
      width: 100%;
      height: 100%;
      z-index: -1;
      opacity: 0.75;
    }
  }
  /* Option to disable dragging */
  &.image-embed-no-drag .image-embed:active img {
    pointer-events: none;
  }
  /* Hacky fix for callouts */
  & .cm-embed-block.cm-callout:has(.image-embed:active) {
    contain: none !important;
  }
}
