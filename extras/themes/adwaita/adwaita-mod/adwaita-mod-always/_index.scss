body.adwaita-mod-always {
  --frame-right-space: calc(var(--adwaita-mod-scale) * 120px);
  --adwaita-mod-foreground-focus: var(--adwaita-headerbar-fg-color);
}

bod.adwaita-window-button-minimize-hide
  .titlebar-button-container.mod-right
  .titlebar-button.mod-minimize {
  display: none;
}

bod.adwaita-window-button-maximize-hide
  .titlebar-button-container.mod-right
  .titlebar-button.mod-maximize {
  display: none;
}

bod.adwaita-window-button-close-hide
  .titlebar-button-container.mod-right
  .titlebar-button.mod-close {
  display: none;
}

bod.adwaita-window-button-minimize-hide:not(
    .adwaita-window-button-maximize-hide.adwaita-window-button-close-hide
  ),
bod.adwaita-window-button-maximize-hide:not(
    .adwaita-window-button-close-hide.adwaita-window-button-minimize-hide
  ),
bod.adwaita-window-button-close-hide:not(
    .adwaita-window-button-minimize-hide.adwaita-window-button-maximize-hide
  ) {
  --frame-right-space: calc(var(--adwaita-mod-scale) * (120px - 38px));
}

bod.adwaita-window-button-minimize-hide.adwaita-window-button-maximize-hide:not(
    .adwaita-window-button-close-hide
  ),
bod.adwaita-window-button-maximize-hide.adwaita-window-button-close-hide:not(
    .adwaita-window-button-minimize-hide
  ),
bod.adwaita-window-button-close-hide.adwaita-window-button-minimize-hide:not(
    .adwaita-window-button-maximize-hide
  ) {
  --frame-right-space: calc(var(--adwaita-mod-scale) * (120px - 38px - 38px));
}

bod.adwaita-window-button-minimize-hide.adwaita-window-button-maximize-hide.adwaita-window-button-close-hide {
  --frame-right-space: calc(
    var(--adwaita-mod-scale) * (120px - 38px - 38px - 38px)
  );
}

body.adwaita-mod-always .titlebar-button-container.mod-right {
  transform: scale(var(--adwaita-mod-scale));
  margin-right: var(--adwaita-mod-right-margin);
  transform-origin: right;
}

body.adwaita-mod-always .titlebar-button-container.mod-right .titlebar-button {
  height: 24px;
  width: 24px;
  border-radius: 12px;
  padding: 0;
  margin: auto 0 auto 14px;
  background: var(--adwaita-mod-background);
  color: var(--adwaita-mod-foreground);
}

body.adwaita-mod-always
  .titlebar-button-container.mod-right
  .titlebar-button.mod-minimize
  svg,
body.adwaita-mod-always
  .titlebar-button-container.mod-right
  .titlebar-button.mod-maximize
  svg,
body.adwaita-mod-always
  .titlebar-button-container.mod-right
  .titlebar-button.mod-close
  svg {
  display: none;
}

body.adwaita-mod-always
  .titlebar-button-container.mod-right
  .titlebar-button::after {
  content: '';
  background-color: currentColor;
  width: 16px;
  height: 16px;
  margin: auto;
}

body.adwaita-mod-always
  .titlebar-button-container.mod-right
  .titlebar-button.mod-minimize::after {
  -webkit-mask-image: var(--adwaita-icon-window-minimize-symbolic);
  mask-image: var(--adwaita-icon-window-minimize-symbolic);
}

body.adwaita-mod-always
  .titlebar-button-container.mod-right
  .titlebar-button.mod-maximize::after {
  -webkit-mask-image: var(--adwaita-icon-window-maximize-symbolic);
  mask-image: var(--adwaita-icon-window-maximize-symbolic);
}

body.adwaita-mod-always
  .titlebar-button-container.mod-right
  .titlebar-button.mod-close::after {
  -webkit-mask-image: var(--adwaita-icon-window-close-symbolic);
  mask-image: var(--adwaita-icon-window-close-symbolic);
}

body.adwaita-mod-always
  .titlebar-button-container.mod-right
  .titlebar-button:hover {
  background: var(--adwaita-mod-background) !important;
}

body.adwaita-mod-always
  .titlebar-button-container.mod-right
  .titlebar-button
  svg {
  width: 12px;
  height: 12px;
  margin: auto;
}

bod.is-focused .titlebar-button-container.mod-right .titlebar-button,
bod.is-focused .modal-close-button {
  background: var(--adwaita-mod-background-focus);
  color: var(--adwaita-mod-foreground-focus);
}

bod.is-focused .titlebar-button-container.mod-right .titlebar-button:hover,
bod.is-focused .modal-close-button:hover {
  background: var(--adwaita-mod-background-hover) !important;
}

bod.is-focused .titlebar-button-container.mod-right .titlebar-button:active,
bod.is-focused .modal-close-button:active {
  background: var(--adwaita-mod-background-active) !important;
}

body.adwaita-mod-always .modal-close-button {
  height: 24px;
  width: 24px;
  border-radius: 12px;
  color: var(--adwaita-mod-foreground);
  background: var(--adwaita-mod-background);
  transform: scale(var(--adwaita-mod-scale));
  transform-origin: right;
}

body.adwaita-mod-always .modal-close-button:before {
  content: '';
  display: block;
  width: 16px;
  height: 16px;
  margin: auto;
  top: 50%;
  position: absolute;
  transform: translateY(-50%);
  -webkit-mask-image: var(--adwaita-icon-window-close-symbolic);
  mask-image: var(--adwaita-icon-window-close-symbolic);
  background-color: currentColor;
}
